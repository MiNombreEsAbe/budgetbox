{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\morenoa2\\\\Desktop\\\\budgetboxapp\\\\budgetboxfrontend\\\\frontend\\\\src\\\\containers\\\\Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, createRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Bar } from 'react-chartjs-2';\nimport Navigation from \"../components/default/Navigation\";\nimport Header from \"../components/default/Header\";\nimport { fetchExpenseReport, fetchLast4MonthsReport } from \"../redux/transactions/operations\";\nimport { updateBudget } from '../redux/users/operations';\nimport { getUser } from \"../redux/users/selectors\";\nimport CancelModal from '../assets/images/cancel.png';\nimport PieChart from '../components/dashboard/PieChart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  _s();\n\n  const dispatch = useDispatch();\n  const selector = useSelector(state => state);\n  const expenseReports = selector[\"transaction\"]['expenseReports'];\n  const last4MonthsReport = selector[\"transaction\"]['last4monthsReport'];\n  const user = getUser(selector);\n  console.log(last4MonthsReport);\n  const defaultGap = 1000;\n  const nextBtnRef = useRef();\n  const prevBtnRef = useRef();\n  let [currentIndex, setCurrentIndex] = useState(3);\n  let [previousIndex, setPreviousIndex] = useState(4);\n  let [currentGap, setCurrentGap] = useState(1000);\n  let [isWeb, setIsWeb] = useState(null);\n  const [openModal, setOpenModal] = useState(false);\n  const [amount, setAmount] = useState(0);\n  useEffect(() => {\n    dispatch(fetchExpenseReport());\n    dispatch(fetchLast4MonthsReport());\n  }, []);\n\n  const handleResize = () => {\n    if (window.matchMedia(\"(max-width: 520px)\").matches) {\n      setIsWeb(false); // Reset Index and Gap\n\n      setCurrentIndex(3);\n      setPreviousIndex(4);\n      setCurrentGap(1000);\n    } else {\n      setIsWeb(true);\n    }\n  };\n\n  const largestReportAmount = Math.max.apply(Math, [{\n    total_amount: 0\n  }].concat(...last4MonthsReport).map(obj => {\n    return obj.total_amount;\n  }));\n  const chartGapAmount = Math.ceil(largestReportAmount * 1.3 / 7 / 100) * 100;\n  const highestGraphAmount = chartGapAmount * 7;\n  const chartHeight = 600;\n\n  const formatTotalAmount = amount => {\n    if (amount >= 1000000) {\n      return (amount / 1000000).toFixed(1) + \"M\";\n    }\n\n    if (amount >= 1000) {\n      return (amount / 1000).toFixed(1) + \"K\";\n    }\n\n    return amount;\n  };\n\n  const chartRefs = React.useRef([]);\n  chartRefs.current = last4MonthsReport.map((_, i) => {\n    var _chartRefs$current$i;\n\n    return (_chartRefs$current$i = chartRefs.current[i]) !== null && _chartRefs$current$i !== void 0 ? _chartRefs$current$i : /*#__PURE__*/createRef();\n  });\n\n  if (isWeb) {\n    // Clear style when web screen\n    if (chartRefs.current.length > 0) {\n      for (let i = 0; i < 4; i++) {\n        if (chartRefs.current[i].current) {\n          chartRefs.current[i].current.style.left = \"\";\n        }\n      }\n    }\n  }\n\n  if (currentIndex === 3 && prevBtnRef.current) prevBtnRef.current.style.display = 'none';\n\n  const nextChartHandler = () => {\n    prevBtnRef.current.style.display = 'block';\n    if (currentIndex === 1) nextBtnRef.current.style.display = 'none';\n    if (currentIndex === 0) return;\n    setPreviousIndex(--previousIndex);\n    setCurrentIndex(--currentIndex);\n    chartRefs.current[previousIndex].current.style.left = `calc(35% + ${currentGap}px)`;\n    chartRefs.current[currentIndex].current.style.left = `35%`;\n    setCurrentGap(currentGap + defaultGap);\n  };\n\n  const prevChartHandler = () => {\n    nextBtnRef.current.style.display = 'block';\n    if (currentIndex === 3) return;\n    chartRefs.current[currentIndex].current.style.left = `calc(35% - ${currentGap}px)`;\n    chartRefs.current[previousIndex].current.style.left = `35%`;\n    setCurrentIndex(++currentIndex);\n    setPreviousIndex(++previousIndex);\n    setCurrentGap(currentGap - defaultGap);\n  }; // asdasdasd\n\n\n  const updateAmountHandler = async () => {\n    dispatch(updateBudget(\"5000\", user.id));\n    dispatch(fetchExpenseReport());\n    setOpenModal(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboardHolder\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {\n      active: \"dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboardContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"title\",\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"custom-modal\",\n          className: `custom-modal ${openModal ? \"\" : \"modal-hide\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"custom-modal-close\",\n            onClick: () => setOpenModal(false),\n            className: \"custom-modal--bg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom-modal--container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-modal--content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: () => setOpenModal(false),\n                className: \"custom-modal--cancel\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: CancelModal,\n                  alt: \"cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 9\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-content\",\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  className: \"popup-form-container\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"budget-form\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"budget-input\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mb-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"cost\",\n                          children: \"Budget\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 144,\n                          columnNumber: 13\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          onChange: e => setAmount(e.target.value),\n                          value: amount ? amount : expenseReports.budget,\n                          name: \"amount\",\n                          className: \"custom-input-modal\",\n                          type: \"number\",\n                          min: \"1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 145,\n                          columnNumber: 13\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 12\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: updateAmountHandler,\n                        type: \"button\",\n                        className: \"custom-btn update\",\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 12\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 10\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 9\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dashboard-left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content container--chart\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inner-container--chart\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-2\",\n                  children: \"Income and Expenses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pl-2\",\n                  children: \"Last 4 Months Reports\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"label-bar expense-amount\",\n                    children: \"Expenditure\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 10\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"label-bar income-amount\",\n                    children: \"Income\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 10\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bottom-line\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: nextBtnRef,\n                  onClick: nextChartHandler,\n                  id: \"prev-btn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  ref: prevBtnRef,\n                  onClick: prevChartHandler,\n                  id: \"next-btn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                  id: \"q-graph\",\n                  children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: last4MonthsReport.map((report, index) => {\n                      let income = report.find(i => {\n                        return i.type === \"income\";\n                      });\n                      let expense = report.find(i => {\n                        return i.type === \"expense\";\n                      });\n                      return /*#__PURE__*/_jsxDEV(\"tr\", {\n                        ref: chartRefs.current[index],\n                        className: \"qtr\",\n                        id: `q${index + 1}`,\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"row\",\n                          children: report[0].date\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 197,\n                          columnNumber: 14\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"tooltip expense-bar bar\",\n                          style: {\n                            height: (expense ? expense.total_amount : 0) * chartHeight / highestGraphAmount\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"tooltiptext\",\n                            children: `$${expense ? formatTotalAmount(expense.total_amount) : 0}`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 15\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 198,\n                          columnNumber: 14\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          className: \"tooltip income-bar bar\",\n                          style: {\n                            height: (income ? income.total_amount : 0) * chartHeight / highestGraphAmount\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"tooltiptext\",\n                            children: `$${income ? formatTotalAmount(income.total_amount) : 0}`\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 218,\n                            columnNumber: 15\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 210,\n                          columnNumber: 14\n                        }, this)]\n                      }, `graph-${index}`, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 13\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 10\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dashboard-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboard-right-top\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dashboard-right-top-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dashboard-right-title\",\n                  children: \"Monthly budget\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Calculation of last 4 months expense will be your Average budget.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-size-28 mt-2\",\n                    children: [\"Budget $\", expenseReports.budget]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 10\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: () => setOpenModal(true),\n                    className: \"ml-1 edit-budget\",\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 10\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-size-28\",\n                  children: [\"Expense $\", expenseReports.total_expense]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-size-28\",\n                  children: [\"Remainder $\", expenseReports.reminder]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboard-right-bottom\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dashboard-right-bottom-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dashboard-right-title\",\n                  children: \"Expenses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(PieChart, {\n                  data: expenseReports\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Dashboard, \"Hben66IQZErdamh2UQfD2agN/aQ=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["C:/Users/morenoa2/Desktop/budgetboxapp/budgetboxfrontend/frontend/src/containers/Dashboard.js"],"names":["React","useState","useEffect","useRef","createRef","useDispatch","useSelector","Bar","Navigation","Header","fetchExpenseReport","fetchLast4MonthsReport","updateBudget","getUser","CancelModal","PieChart","Dashboard","dispatch","selector","state","expenseReports","last4MonthsReport","user","console","log","defaultGap","nextBtnRef","prevBtnRef","currentIndex","setCurrentIndex","previousIndex","setPreviousIndex","currentGap","setCurrentGap","isWeb","setIsWeb","openModal","setOpenModal","amount","setAmount","handleResize","window","matchMedia","matches","largestReportAmount","Math","max","apply","total_amount","concat","map","obj","chartGapAmount","ceil","highestGraphAmount","chartHeight","formatTotalAmount","toFixed","chartRefs","current","_","i","length","style","left","display","nextChartHandler","prevChartHandler","updateAmountHandler","id","e","target","value","budget","report","index","income","find","type","expense","date","height","total_expense","reminder"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, createRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Bar } from 'react-chartjs-2';\r\n\r\nimport Navigation from \"../components/default/Navigation\";\r\nimport Header from \"../components/default/Header\";\r\nimport { fetchExpenseReport, fetchLast4MonthsReport } from \"../redux/transactions/operations\";\r\nimport { updateBudget } from '../redux/users/operations';\r\nimport { getUser } from \"../redux/users/selectors\";\r\nimport CancelModal from '../assets/images/cancel.png';\r\nimport PieChart from '../components/dashboard/PieChart';\r\n\r\nexport default function Dashboard() {\r\n    const dispatch = useDispatch();\r\n\tconst selector = useSelector((state) => state);\r\n\tconst expenseReports = selector[\"transaction\"]['expenseReports'];\r\n\tconst last4MonthsReport = selector[\"transaction\"]['last4monthsReport'];\r\n\tconst user = getUser(selector);\r\n\r\n    console.log(last4MonthsReport)\r\n    \r\n\r\n    const defaultGap = 1000;\r\n\tconst nextBtnRef = useRef();\r\n\tconst prevBtnRef = useRef();\r\n\r\n\tlet [currentIndex, setCurrentIndex] = useState(3);\r\n\tlet [previousIndex, setPreviousIndex] = useState(4);\r\n\tlet [currentGap, setCurrentGap] = useState(1000);\r\n\tlet [isWeb, setIsWeb] = useState(null);\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n\tconst [amount, setAmount] = useState(0);\r\n\r\n    useEffect(() => {\r\n\t\tdispatch(fetchExpenseReport());\r\n\t\tdispatch(fetchLast4MonthsReport());\r\n\t}, []);\r\n\r\n    const handleResize = () => {\r\n\t\tif (window.matchMedia(\"(max-width: 520px)\").matches) {\r\n\t\t\tsetIsWeb(false);\r\n\r\n\t\t\t// Reset Index and Gap\r\n\t\t\tsetCurrentIndex(3)\r\n\t\t\tsetPreviousIndex(4)\r\n\t\t\tsetCurrentGap(1000)\r\n\t\t} else {\r\n\t\t\tsetIsWeb(true);\r\n\t\t}\r\n\t};\r\n\r\n    const largestReportAmount = Math.max.apply(\r\n\t\tMath,\r\n\t\t[{ total_amount: 0 }].concat(...last4MonthsReport).map((obj) => {\r\n\t\t\treturn obj.total_amount;\r\n\t\t})\r\n\t);\r\n\r\n\tconst chartGapAmount = Math.ceil((largestReportAmount * 1.3) / 7 / 100) * 100;\r\n\tconst highestGraphAmount = chartGapAmount * 7;\r\n\tconst chartHeight = 600;\r\n\r\n\tconst formatTotalAmount = (amount) => {\r\n\t\tif (amount >= 1000000) {\r\n\t\t\treturn (amount / 1000000).toFixed(1) + \"M\";\r\n\t\t}\r\n\t\tif (amount >= 1000) {\r\n\t\t\treturn (amount / 1000).toFixed(1) + \"K\";\r\n\t\t}\r\n\t\treturn amount;\r\n\t};\r\n\r\n\tconst chartRefs = React.useRef([]);\r\n\r\n\tchartRefs.current = last4MonthsReport.map((_, i) => chartRefs.current[i] ?? createRef());\r\n\r\n\tif (isWeb) {\r\n\t\t// Clear style when web screen\r\n\t\tif (chartRefs.current.length > 0) {\r\n\t\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\t\tif (chartRefs.current[i].current) {\r\n\t\t\t\t\tchartRefs.current[i].current.style.left = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tif(currentIndex === 3 && prevBtnRef.current) prevBtnRef.current.style.display = 'none'\r\n\r\n\tconst nextChartHandler = () => {\r\n\t\tprevBtnRef.current.style.display = 'block'\r\n\t\tif(currentIndex === 1) nextBtnRef.current.style.display = 'none'\r\n\t\tif (currentIndex === 0) return;\r\n\t\t\r\n\t\tsetPreviousIndex(--previousIndex);\r\n\t\tsetCurrentIndex(--currentIndex);\r\n\t\t\r\n\t\tchartRefs.current[previousIndex].current.style.left = `calc(35% + ${currentGap}px)`;\r\n\t\tchartRefs.current[currentIndex].current.style.left = `35%`;\r\n\t\tsetCurrentGap(currentGap + defaultGap);\r\n\t};\r\n\r\n\tconst prevChartHandler = () => {\r\n\t\tnextBtnRef.current.style.display = 'block'\r\n\t\tif (currentIndex === 3) return;\r\n\t\t\r\n\t\tchartRefs.current[currentIndex].current.style.left = `calc(35% - ${currentGap}px)`;\r\n\t\tchartRefs.current[previousIndex].current.style.left = `35%`;\r\n\r\n\t\tsetCurrentIndex(++currentIndex);\r\n\t\tsetPreviousIndex(++previousIndex);\r\n\t\tsetCurrentGap(currentGap - defaultGap);\r\n\t};\r\n\r\n\t\r\n\r\n    // asdasdasd\r\n\r\n    const updateAmountHandler = async () => {\r\n\t\tdispatch(updateBudget(\"5000\", user.id))\r\n\t\tdispatch(fetchExpenseReport());\r\n\t\tsetOpenModal(false)\r\n\t}\r\n\r\n    return (\r\n        <div className='dashboardHolder'>\r\n            <Navigation active=\"dashboard\" />\r\n            <div className=\"dashboard\">\r\n                <Header />\r\n                <div className=\"dashboardContent\">\r\n                    <p className=\"title\">Dashboard</p>\r\n                    <div id=\"custom-modal\" className={`custom-modal ${openModal ? \"\" : \"modal-hide\"}`}>\r\n\t\t\t\t\t<div id=\"custom-modal-close\" onClick={()=> setOpenModal(false)} className=\"custom-modal--bg\"></div>\r\n\t\t\t\t\t<div className=\"custom-modal--container\">\r\n\t\t\t\t\t\t<div className=\"custom-modal--content\">\r\n\t\t\t\t\t\t\t<div onClick={()=> setOpenModal(false)} className=\"custom-modal--cancel\">\r\n\t\t\t\t\t\t\t\t<img src={CancelModal} alt=\"cancel\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t\t\t<form className=\"popup-form-container\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"budget-form\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"budget-input\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"cost\">Budget</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e)=> setAmount(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={amount ? amount : expenseReports.budget}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"amount\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"custom-input-modal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={updateAmountHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"custom-btn update\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"dashboard\">\r\n\t\t\t\t\t<div className=\"dashboard-left\">\r\n\t\t\t\t\t\t<div className=\"content container--chart\">\r\n\t\t\t\t\t\t\t<div className=\"inner-container--chart\">\r\n\t\t\t\t\t\t\t\t<div className=\"p-2\">Income and Expenses</div>\r\n\t\t\t\t\t\t\t\t<div className=\"pl-2\">Last 4 Months Reports</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"label-bar expense-amount\">Expenditure</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"label-bar income-amount\">Income</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"bottom-line\"></div>\r\n\t\t\t\t\t\t\t\t<div ref={nextBtnRef} onClick={nextChartHandler} id=\"prev-btn\"></div>\r\n\t\t\t\t\t\t\t\t<div ref={prevBtnRef} onClick={prevChartHandler} id=\"next-btn\"></div>\r\n\t\t\t\t\t\t\t\t<table id=\"q-graph\">\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t{last4MonthsReport.map((report, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet income = report.find((i) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn i.type === \"income\";\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\tlet expense = report.find((i) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn i.type === \"expense\";\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={chartRefs.current[index]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"qtr\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={`q${index + 1}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`graph-${index}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\">{report[0].date}</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tooltip expense-bar bar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t((expense ? expense.total_amount : 0) * chartHeight) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thighestGraphAmount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"tooltiptext\">{`$${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texpense ? formatTotalAmount(expense.total_amount) : 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"tooltip income-bar bar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t((income ? income.total_amount : 0) * chartHeight) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thighestGraphAmount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"tooltiptext\">{`$${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tincome ? formatTotalAmount(income.total_amount) : 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"dashboard-right\">\r\n\t\t\t\t\t\t<div className=\"dashboard-right-top\">\r\n\t\t\t\t\t\t\t<div className=\"dashboard-right-top-container\">\r\n\t\t\t\t\t\t\t\t<div className=\"dashboard-right-title\">Monthly budget</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\tCalculation of last 4 months expense will be your Average budget.\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-size-28 mt-2\">Budget ${expenseReports.budget}</span>\r\n\t\t\t\t\t\t\t\t\t<span onClick={()=> setOpenModal(true)} className=\"ml-1 edit-budget\">Edit</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"font-size-28\">Expense ${expenseReports.total_expense}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"font-size-28\">Remainder ${expenseReports.reminder}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"dashboard-right-bottom\">\r\n\t\t\t\t\t\t\t<div className=\"dashboard-right-bottom-container\">\r\n\t\t\t\t\t\t\t\t<div className=\"dashboard-right-title\">Expenses</div>\r\n\t\t\t\t\t\t\t\t<PieChart data={expenseReports} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n                    {/* <button onClick={updateAmountHandler}>Update</button> */}\r\n                </div>    \r\n            </div>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}